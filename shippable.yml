language: node_js

node_js:
  - 6.12

branches:
  only:
    - master

env:
  - NODE_ENV=development

build:

  pre_ci:
    - env

  ci:
    - curl -s -o $(pwd)/cvrg.sh https://gist.githubusercontent.com/tobilg/b0fae1eacb844bbbbe96c495347ab498/raw/dd30d59b875e7918d33dbec2d43903749578fedf/cvrg.sh && chmod +x $(pwd)/cvrg.sh
    - shippable_retry npm install
    - npm run test

  post_ci:
      - npm run coverage
